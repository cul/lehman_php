function writePages(pages, start, dlo, document_id) {
	start = parseInt(start);
	pages = parseInt(pages);
	innerH = "";

	// this is set to 890 b/c IE is behaving badly
	innerH = '<table width="890" align="left" style="font-size:10px;"><tr><td valign="top">';
	innerH += '<td valign="top" width="300" align="left" style="font-size:10px;">';
	
        if ( (start-1) > 0) {
                innerH += '<a style="cursor:pointer" onclick="javascript:incrementPage(\'' + pages + '\',\'' + (start-1) + '\',\'' + dlo + '\',\'' + document_id + '\')">Prev page (' + (start-1) + ')</a>';

        }
        else
                innerH += '<span style="color:#999">No prev page</span>';

        innerH += '</td><td valign="top" width="300" align="center" style="font-size:10px;">';
        innerH += 'Page ' + start + ' of ' + pages + '</td>';
        innerH += '<td valign="top" align="right" width="300" style="font-size:10px;">';
        if ( (start + 1) <= pages) {
                innerH += '<a style="cursor:pointer;" onclick="javascript:incrementPage(\'' + pages + '\',\'' + (start+1) + '\',\'' + dlo + '\',\'' + document_id + '\')">Next page (' + (start+1) + ')</a>';
        }
        else
                innerH += '<span style="color:#999;">No next page</span>';
	
        innerH += '</td>';
        innerH += '</tr></table>';
 
	document.getElementById('pagination').innerHTML = innerH;

} // end FUNCTION writePages

function incrementPage(pages, start, dlo, document_id) {
	size = "900";
      	newImgSrc = document.getElementById('imgBookImage').src;

	if (newImgSrc.search(1200) > -1) 
		size = "1200";

	document.getElementById('imgBookImage').src = dlo + '?obj=' + document_id + '_' + padleft(start, "0", 3) + "&size=" + size;
	//document.getElementById('pagination').innerHTML = 
	writePages(pages,start,dlo,document_id);
	//alert(document.getElementById('pagination').innerHTML);
}

// from http://lawrence.ecorp.net/inet/samples/regexp-format.php
        function padleft(val, ch, num) {
            var re = new RegExp(".{" + num + "}$");
            var pad = "";
            if (!ch) ch = " ";
            do  {
                pad += ch;
            }while(pad.length < num);
            return re.exec(pad + val);
        }

/***************************************************************
 * function toggle(id)
 *
 * Takes the id of a <div> and sets the style display
 * equal to "block" or "none"
 *
 * If L does not exist, display should be set to "none;"
 * some browsers may issue a warning.
 ***************************************************************/

function toggle(id, msgOff, msgOn) {
        var L = document.getElementById("L"+id);
        var I = document.getElementById("I"+id);
        if (L.style.display == "" || L.style.display == "none") {
                L.style.display = "block";
                I.src = "http://www.columbia.edu/cu/lweb/images/icons/left-on.gif";
                document.getElementById("spanblurb"+id).innerHTML = msgOn;
        } // end IF
        else {
                L.style.display = "none";
                I.src = "http://www.columbia.edu/cu/lweb/images/icons/left-off.gif";
                document.getElementById("spanblurb"+id).innerHTML = msgOff;
        } // end ELSE
} // end FUNCTION toggle(id)

function breakFrame(id, caller) {

        if (caller == 1) {
                document.getElementById(id).style.width = "900px"
                document.getElementById('ocrText').style.width="900px"
		document.getElementById('pageMenu').style.width = "900px";
                newImgSrc = document.getElementById('imgBookImage').src;
                newImgSrc = newImgSrc.replace(/1200/g,'900');
                document.getElementById('imgBookImage').src = newImgSrc;
		document.getElementById('controller1').style.color = "#ccc";
		document.getElementById('controller1').style.border = "1px solid #ccc";
                document.getElementById('controller2').style.color = "#369";
                document.getElementById('controller2').style.border = "1px solid #369";
        }

        else { // (caller == 2)
                document.getElementById(id).style.width = "1200px";
                document.getElementById('ocrText').style.width="1200px";
		document.getElementById('pageMenu').style.width = "1200px";
                newImgSrc = document.getElementById('imgBookImage').src;
                newImgSrc = newImgSrc.replace(/900/g,'1200');
                document.getElementById('imgBookImage').src = newImgSrc;
                document.getElementById('controller1').style.color = "#369";
                document.getElementById('controller1').style.border = "1px solid #369";
                document.getElementById('controller2').style.color = "#ccc";
                document.getElementById('controller2').style.border = "1px solid #ccc";


        }
        document.getElementById('controller' + caller).style.color == "#ccc";
}

function openCitation(){
                	defWindow=window.open('/lehman/citation.php', 'defWin', 'width=575,height=480,scrollbars=yes,menubar=yes');
} // end FUNCTION openCitation()

function checkDate() {
	if (document.getElementById("month").value != "" || document.getElementById("year").value != "") {
	//	alert("month: " + document.getElementById("month").value + " year: " + document.getElementById("year").value + " day: " + document.getElementById("day").value);
		document.getElementById("day").disabled = false;
	}
	else {
		document.getElementById("day").options[0].selected = true;
		document.getElementById("day").disabled = true;
	}
} // end FUNCTION checkDate()

function resetMe() {
	document.getElementById('searchForm').reset();	
	var myForm = document.getElementById('searchForm');
	var mySel;
	
	for (var i = 0; i < myForm.file_unittitle_t.length; i++) {
		if (myForm.file_unittitle_t.options[i].selected == true) {
			//alert(myForm.file_unittitle_t.options[i].selected);
			//myForm.file_unittitle_t.options[i].selected = false;
			//alert(myForm.file_unittitle_t.options[i].selected)
			mySel = i;
		}
	}	
		
	myForm.file_unittitle_t.options[mySel].selected = false;

	myForm.file_unittitle_t.options[0].selected = true;
	myForm.freetext.value = "";
	myForm.document_id.value = "";
	myForm.ocr.checked = false;
	myForm.genreform1_t.options[0].selected = true;
	myForm.year.options[0].selected = true;
	myForm.month.options[0].selected = true;
	myForm.day.options[0].selected = true;
	checkDate();
}
